<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Acronym Project - Ant and Eclipse</title>
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="A tech blog about ruby, code, mongodb, golang and other stuff.">
    <link rel="canonical" href="http://squarism.com//2003/03/30/acronym-project-ant-and-eclipse/">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">

</head>


    <body>

    <header class="site-header">

  <div class="wrap">

    <a class="site-title" href="/">Squarism</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 18 15" enable-background="new 0 0 18 15" xml:space="preserve">
          <path fill="#505050" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0
            h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#505050" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484
            h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#505050" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0
            c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>
      <div class="trigger">
        
          <a class="page-link" href="/about/">About</a>
        
          
        
          
        
          <a class="page-link" href="/about/index.html">About</a>
        
          <a class="page-link" href="/questions/index.html">Questions I Have</a>
        
          <a class="page-link" href="/tatris/index.html">Tatris - A Tetris Clone</a>
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrap">
      <div class="post">

  <header class="post-header">
    <h1>Acronym Project - Ant and Eclipse</h1>
    <p class="meta">Mar 30, 2003 â€¢ Posted by: chris</p>
  </header>

  <article class="post-content">
  <p>Having some problems getting Ant running the way I want to.  It's another question of whether the IDE (Eclipse) is being too inflexible or if I'm not doing something right.  Eclipse doesn't ship with functionality that allows  ant build options.  Here's a log of what I've been trying.<br />
<a id="more"></a><a id="more-19"></a></p>
<p>
Trying to get Cactus / JUnit automated.  Added this to my build.xml:</p>
<pre>
  <target name="junit.cactus"><br />
  	<junit printsummary="yes" haltonfailure="yes" haltonerror="yes" fork="yes" /><br />
  	<classpath refid="classpath.project" />
<formatter type="plain" usefile="false" />
  	<batchtest fork="yes" todir="build"><br />
  		<fileset dir="src"><br />
		  	<include name="**Test*.java" /><br />
	  	</fileset><br />
  	</batchtest><br />
  </target><br />
</pre>
<p>&lt;/p&gt;</p>
<p>But it seems that the Eclipse Ant pluging doesn't ship with the junit jar/functionality.  So I went to Preferences and tried to set my ANT_HOME to be my external install of ant (1.5.2).  When I looked at the build.xml file again in Eclipse, I got this horrible error:</p>
<pre>
Buildfile: /home/chris/workspace/AcronymChallenge/acronym/WEB-INF/build.xml<br />
BUILD FAILED: java.lang.VerifyError: (class: org/apache/xerces/parsers/IntegratedParserConfiguration, method: configurePipeline signature: ()V) Incompatible type for getting or setting field<br />
Total time: 206 milliseconds<br />
</pre>
<p>&lt;/p&gt;</p>
<p>After some research, I'm thinking that the cause of the problem is conflicting Xerces classes.  Eclipse must include Xerces somewhere as a part of it's core libraries (like under [Eclipse_Install_Dir]/plugins/org.apache.ant_1.5.2).  So I was at a dead end.  I signed up for an <a href="http://www.eclipse.org/newsgroups/index.html">Eclipse newsgroup account</a> and hit the archives.  I found this.</p>
<pre>
You are correct Christian.
<p>The ant.jar and optional.jar provided with the Ant 1.5.* distributions<br />
contain a manifest file that has classpath entries for the Xerces JARs.<br />
If these JARs are in the same location as the ant.jar or optional.jar, these<br />
Xerces JARs will be used to load the Xerces classes.</p>
<p>The classpath manifest entry has been removed in the Ant 1.6.* distribution.</p>
<p>HTH<br />
Darins</p>
<p>"Christian van der Leeden"  wrote in message<br />
news:b4kubc$tog$1@rogue.oti.com...<br />
&gt; Hi,<br />
&gt;<br />
&gt; I'm getting this behaviour even when<br />
&gt; following the advice from the build notes.<br />
&gt; You will have to remove the files from the file system<br />
&gt; (just removing them from the runtime panel in the preferences<br />
&gt; won't help, this is with ANT_HOME set).<br />
&gt;<br />
&gt; Christian<br />
&gt;<br />
&gt;<br />
&gt;<br />
&gt;<br />
&gt;<br />
&gt; Darin Swanson wrote:<br />
&gt; &gt; From the build notes for 20030306:<br />
&gt; &gt; Note: Adding the Xerces JARs to your runtime Ant classpath is no longer<br />
&gt; &gt; required. In fact, adding these JARs can cause problems. The Xerces<br />
classes<br />
&gt; &gt; are loaded from the Xerces plugin provided with Eclipse.<br />
&gt; &gt;<br />
&gt; &gt;<br />
&gt; &gt;<br />
&gt; &gt; This change is a result of fixes for bugs:<br />
&gt; &gt;<br />
&gt; &gt; http://bugs.eclipse.org/bugs/show_bug.cgi?id=33117<br />
&gt; &gt;<br />
&gt; &gt; http://bugs.eclipse.org/bugs/show_bug.cgi?id=33664<br />
&gt; &gt;<br />
&gt; &gt; HTH<br />
&gt; &gt; Darins<br />
&gt; &gt;<br />
&gt; &gt; "Christian van der Leeden"  wrote in message<br />
&gt; &gt; news:b4kmk8$mq1$1@rogue.oti.com...<br />
&gt; &gt;<br />
&gt; &gt;&gt;Hi,<br />
&gt; &gt;&gt;<br />
&gt; &gt;&gt;when setting the ANT_HOME directory to my normal<br />
&gt; &gt;&gt;ant 1.5.2 installation I get an error inside the "Run Ant..."<br />
&gt; &gt;&gt;panel (which appears context sensitive for the build.xml file)<br />
&gt; &gt;&gt;It says in the top panel:<br />
&gt; &gt;&gt;(class org.apache.xerces.parsers.IntegratedParserConfiguration, method:<br />
&gt; &gt;&gt;configurePipeline<br />
&gt; &gt;&gt;signature()V) Incompatible for getting or setting field).<br />
&gt; &gt;&gt;<br />
&gt; &gt;&gt;When deleting the xercesImpl.jar and xml-apis.jar this problem goes<br />
&gt; &gt;&gt;away. Is this related to:<br />
&gt; &gt;&gt;http://bugs.eclipse.org/bugs/show_bug.cgi?id=33117 ?<br />
&gt; &gt;&gt;<br />
&gt; &gt;&gt;Thanks<br />
&gt; &gt;&gt;<br />
&gt; &gt;&gt;Christian<br />
&gt; &gt;&gt;<br />
&gt; &gt;<br />
&gt; &gt;<br />
&gt; &gt;<br />
&gt;<br />
</p>
<p>So then I attemped to use Ant 1.6 (alpha).  I got the same error.  I tried to remove xercesImpl.jar from the filesystem but then got:</p>
<pre>
Buildfile: /home/chris/workspace/AcronymChallenge/acronym/WEB-INF/build.xml<br />
BUILD FAILED: Target `(class: org/apache/xerces/parsers/IntegratedParserConfiguration' does not exist in this project.<br />
Total time: 243 milliseconds<br />
</pre>
<p>So I tried a series of adding jars, removing jars, editing plugins, adding a junit task under the Ant Perferences.  Nothing seemd to work.  I finally found this suggestion:</p>
<pre>
<requires><br />
	<import plugin="org.apache.xerces" /><br />
</requires>
<p>To:</p>
<p><requires><br />
	<import plugin="org.apache.xerces" /><br />
	<import plugin="org.junit" /><br />
</requires></p>
<p>This should make the junit ant task work ;-)<br />
</p>
<p>The ant task is there, it just doesn't seem to do anything.  The build is displayed as <b>successful</b> but I know that most of my tests fail.  Now I'm questioning what I'm actually trying to accomplish.  Although I have junit as an Ant task, Eclipse doesn't have the tight integration I wanted.  I'm going to play with Ant outside of Eclipse and/or use Eclipse's integrated JUnit plugin for TestSuites.<br />
</p>
</pre></pre>

  </article>

</div>
      </div>
    </div>

    <footer class="site-footer">

  <div class="wrap">

    <h2 class="footer-heading">Squarism</h2>

    <div class="footer-col-1 column">
      <ul>
        <li>Squarism</li>
        <li><a href="mailto:squarism@gmail.com">squarism@gmail.com</a></li>
      </ul>
    </div>

    <div class="footer-col-2 column">
      <ul>
        <li>
          <a href="https://github.com/squarism">
            <span class="icon github">
              <svg version="1.1" class="github-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                 viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                <path fill-rule="evenodd" clip-rule="evenodd" fill="#C2C2C2" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761
                c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32
                c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472
                c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037
                C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65
                c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261
                c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082
                c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129
                c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>
            <span class="username">squarism</span>
          </a>
        </li>
        <li>
          <a href="https://twitter.com/squarism">
            <span class="icon twitter">
              <svg version="1.1" class="twitter-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                 viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                <path fill="#C2C2C2" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27
                c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767
                c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206
                C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271
                c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469
                c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
              </svg>
            </span>
            <span class="username">squarism</span>
          </a>
        </li>
      </ul>
    </div>

    <div class="footer-col-3 column">
      <p class="text">A tech blog about ruby, code, mongodb, golang and other stuff.</p>
    </div>

  </div>

</footer>


    </body>
</html>